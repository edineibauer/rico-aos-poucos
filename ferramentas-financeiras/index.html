<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Ferramentas financeiras: compare investimentos, calcule juros compostos, simule carteiras e rebalanceamento.">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ricoaospoucos.com.br/ferramentas-financeiras/">

  <!-- Hreflang Tags -->

  <!-- Open Graph -->
  <meta property="og:title" content="Ferramentas Financeiras | Rico aos Poucos">
  <meta property="og:description" content="Ferramentas financeiras: compare investimentos, calcule juros compostos, simule carteiras.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ricoaospoucos.com.br/ferramentas-financeiras/">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:site_name" content="Rico aos Poucos">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ferramentas Financeiras | Rico aos Poucos">
  <meta name="twitter:description" content="Compare investimentos, calcule juros compostos, simule carteiras e rebalanceamento.">

  <!-- Keywords -->
  <meta name="keywords" content="calculadora de investimentos, comparador de investimentos, juros compostos, simulador de carteira, rebalanceamento de carteira, CDI, Ibovespa, d√≥lar, tesouro direto, FIIs, renda fixa, renda vari√°vel">

  <!-- PWA -->
  <meta name="theme-color" content="#0d1117">
  <link rel="manifest" href="../manifest.json">
  <!-- Favicon - Multiple formats for browser and search engine compatibility -->
  <link rel="icon" type="image/png" sizes="192x192" href="../icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="../icon-512.png">
  <link rel="icon" type="image/svg+xml" href="../favicon.svg">
  <link rel="shortcut icon" href="../icon-192.png">

  <title>Ferramentas Financeiras | Rico aos Poucos</title>

  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/comparador.css">
  <link rel="stylesheet" href="../css/custo-construcao.css">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Ferramentas Financeiras - Rico aos Poucos",
    "description": "Ferramentas financeiras para comparar investimentos, calcular juros compostos, simular carteiras e rebalanceamento.",
    "url": "https://ricoaospoucos.com.br/ferramentas-financeiras/",
    "applicationCategory": "FinanceApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "BRL"
    },
    "provider": {
      "@type": "Organization",
      "name": "Rico aos Poucos",
      "url": "https://ricoaospoucos.com.br"
    },
    "featureList": [
      "Comparador hist√≥rico de investimentos",
      "Calculadora de juros compostos",
      "Simulador de carteira diversificada",
      "Ferramenta de rebalanceamento",
      "An√°lise de padr√µes hist√≥ricos"
    ]
  }
  </script>
</head>
<body>
  <div class="page-wrapper">
    <header id="page-header" data-subtitle="Ferramentas Financeiras"></header>

    <main class="comp2-main">
      <!-- Sidebar Navigation -->
      <aside class="comp2-sidebar">
        <nav class="comp2-nav">
          <button class="comp2-nav-btn active" data-tab="historico" title="Comparador Hist√≥rico">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/>
            </svg>
            <span>Hist√≥rico</span>
          </button>
          <button class="comp2-nav-btn" data-tab="duelo" title="Comparar Ativos">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 3h5v5"/><path d="M8 3H3v5"/><path d="M21 3l-7 7"/><path d="M3 3l7 7"/><path d="M21 21l-7-7"/><path d="M3 21l7-7"/><path d="M16 21h5v-5"/><path d="M8 21H3v-5"/>
            </svg>
            <span>Comparar</span>
          </button>
          <button class="comp2-nav-btn" data-tab="carteira" title="Carteira Diversificada">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/><path d="M12 2a10 10 0 0 1 0 20"/><path d="M12 2v20"/><path d="M2 12h20"/>
            </svg>
            <span>Carteira</span>
          </button>
          <button class="comp2-nav-btn" data-tab="rebalancear" title="Rebalanceamento de Carteira">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2v-4M9 21H5a2 2 0 0 1-2-2v-4"/><path d="M3 9h18"/><path d="M3 15h18"/>
            </svg>
            <span>Rebalancear</span>
          </button>
          <button class="comp2-nav-btn" data-tab="padroes" title="Padr√µes Hist√≥ricos">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 20h20"/><path d="M5 20V10"/><path d="M9 20V4"/><path d="M13 20v-8"/><path d="M17 20V8"/><path d="M21 20v-4"/>
            </svg>
            <span>Padr√µes</span>
          </button>
          <button class="comp2-nav-btn" data-tab="calculadora" title="Calculadora de Investimentos">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="10" y2="10"/><line x1="14" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="10" y2="14"/><line x1="14" y1="14" x2="16" y2="14"/><line x1="8" y1="18" x2="10" y2="18"/><line x1="14" y1="18" x2="16" y2="18"/>
            </svg>
            <span>Calculadora</span>
          </button>
          <button class="comp2-nav-btn" data-tab="construcao" title="Calculadora de Custo de Constru√ß√£o">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 21h18"/><path d="M5 21V7l7-4 7 4v14"/><path d="M9 21v-6h6v6"/><path d="M9 9h.01"/><path d="M15 9h.01"/><path d="M9 13h.01"/><path d="M15 13h.01"/>
            </svg>
            <span>Constru√ß√£o</span>
          </button>

          <!-- Mobile More Button -->
          <button class="comp2-nav-more" id="comp2NavMore" title="Mais op√ß√µes">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
            <span>Mais</span>
          </button>
        </nav>

        <!-- Mobile Dropup Menu -->
        <div class="comp2-dropup" id="comp2Dropup">
          <div class="comp2-dropup-title">Mais ferramentas</div>
          <div class="comp2-dropup-items">
            <button class="comp2-dropup-btn" data-tab="padroes" title="Padr√µes Hist√≥ricos">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 20h20"/><path d="M5 20V10"/><path d="M9 20V4"/><path d="M13 20v-8"/><path d="M17 20V8"/><path d="M21 20v-4"/>
              </svg>
              <span>Padr√µes</span>
            </button>
            <button class="comp2-dropup-btn" data-tab="calculadora" title="Calculadora de Investimentos">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="4" y="2" width="16" height="20" rx="2"/><line x1="8" y1="6" x2="16" y2="6"/><line x1="8" y1="10" x2="10" y2="10"/><line x1="14" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="10" y2="14"/><line x1="14" y1="14" x2="16" y2="14"/><line x1="8" y1="18" x2="10" y2="18"/><line x1="14" y1="18" x2="16" y2="18"/>
              </svg>
              <span>Calculadora</span>
            </button>
            <button class="comp2-dropup-btn" data-tab="construcao" title="Calculadora de Custo de Constru√ß√£o">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 21h18"/><path d="M5 21V7l7-4 7 4v14"/><path d="M9 21v-6h6v6"/><path d="M9 9h.01"/><path d="M15 9h.01"/><path d="M9 13h.01"/><path d="M15 13h.01"/>
              </svg>
              <span>Constru√ß√£o</span>
            </button>
          </div>
        </div>
        <div class="comp2-dropup-overlay" id="comp2DropupOverlay"></div>
      </aside>

      <!-- Main Content Area -->
      <div class="comp2-content">

        <!-- Tab: Comparador Hist√≥rico -->
        <section class="comp2-tab active" id="comp2-historico">
          <div class="comp2-panel">
            <!-- Config inline -->
            <div class="comp2-config">
              <div class="comp2-config-row">
                <div class="comp2-field">
                  <label>Per√≠odo inicial</label>
                  <div class="comp2-date-select" data-target="comp2PeriodoInicio">
                    <select class="date-month" data-default="01"></select>
                    <select class="date-year" data-default="2011"></select>
                    <input type="hidden" id="comp2PeriodoInicio" value="2011-01">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Per√≠odo final</label>
                  <div class="comp2-date-select" data-target="comp2PeriodoFim">
                    <select class="date-month" data-default="12"></select>
                    <select class="date-year" data-default="2025"></select>
                    <input type="hidden" id="comp2PeriodoFim" value="2025-12">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Valor inicial</label>
                  <div class="comp2-input-group">
                    <span>R$</span>
                    <input type="text" id="comp2Valor" value="100.000" inputmode="numeric">
                  </div>
                </div>
              </div>
              <div class="comp2-config-row comp2-adjustments">
                <div class="comp2-field">
                  <label>D√≥lar + (a.a.) <span class="comp2-tooltip" title="Adiciona rendimento extra ao d√≥lar, ex: conta em corretora americana rendendo 4% ao ano">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2DolarExtra" value="4" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Im√≥veis + (a.a.) <span class="comp2-tooltip" title="Rendimento anual l√≠quido de aluguel. Ex: 5% significa R$5.000/ano para im√≥vel de R$100.000">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2ImoveisRenda" value="4,5" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Simular infla√ß√£o <span class="comp2-tooltip" title="Opcional: se informado, substitui a infla√ß√£o hist√≥rica real por este valor fixo anual em todos os c√°lculos de retorno real">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2InflacaoCustom" value="" placeholder="--" inputmode="decimal">
                    <span>% a.a.</span>
                  </div>
                </div>
              </div>

              <!-- Asset chips -->
              <div class="comp2-assets">
                <button class="comp2-chip" data-asset="ibovespa">
                  <span class="chip-dot" style="background:#3b82f6"></span>IBOV
                </button>
                <button class="comp2-chip active" data-asset="ibovtr">
                  <span class="chip-dot" style="background:#2563eb"></span>IBOV TR
                </button>
                <button class="comp2-chip active" data-asset="dolar">
                  <span class="chip-dot" style="background:#22c55e"></span>D√≥lar
                </button>
                <button class="comp2-chip active" data-asset="ouro">
                  <span class="chip-dot" style="background:#eab308"></span>Ouro
                </button>
                <button class="comp2-chip active" data-asset="fii_ifix">
                  <span class="chip-dot" style="background:#8b5cf6"></span>FIIs
                </button>
                <button class="comp2-chip" data-asset="idiv">
                  <span class="chip-dot" style="background:#10b981"></span>IDIV
                </button>
                <button class="comp2-chip" data-asset="cdi">
                  <span class="chip-dot" style="background:#ec4899"></span>CDI
                </button>
                <button class="comp2-chip active" data-asset="imab5">
                  <span class="chip-dot" style="background:#06b6d4"></span>IMA-B 5+
                </button>
                <button class="comp2-chip" data-asset="sp500_brl">
                  <span class="chip-dot" style="background:#ef4444"></span>S&P 500
                </button>
                <button class="comp2-chip" data-asset="tlt_brl">
                  <span class="chip-dot" style="background:#0ea5e9"></span>TLT
                </button>
                <button class="comp2-chip" data-asset="imoveis_fipezap">
                  <span class="chip-dot" style="background:#14b8a6"></span>Im√≥veis
                </button>
                <button class="comp2-chip" data-asset="bitcoin_brl">
                  <span class="chip-dot" style="background:#f7931a"></span>Bitcoin
                </button>
              </div>

              <!-- Action button -->
              <button class="comp2-btn-run" id="comp2BtnRun">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
                Comparar
              </button>
            </div>

            <!-- Results -->
            <div class="comp2-results" id="comp2Results" style="display: none;">
              <!-- Chart -->
              <div class="comp2-card comp2-chart-card">
                <div class="comp2-card-header">
                  <h3>Evolu√ß√£o do Patrim√¥nio</h3>
                  <div class="comp2-toggle">
                    <button class="active" data-view="nominal">Nominal</button>
                    <button data-view="real">Real</button>
                  </div>
                </div>
                <div class="comp2-chart" id="comp2Chart">
                  <div class="comp2-chart-placeholder">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
                      <path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/>
                    </svg>
                    <p>Selecione os ativos e clique em "Comparar"</p>
                  </div>
                </div>
              </div>

              <!-- Ranking Grid -->
              <div class="comp2-card" style="margin-top: 24px;">
                <h3>Ranking de Retorno Real</h3>
                <div class="comp2-ranking" id="comp2Ranking">
                  <div class="comp2-ranking-empty">
                    <p>Os resultados aparecer√£o aqui</p>
                  </div>
                </div>
              </div>

              <!-- Quick Stats -->
              <div class="comp2-stats" id="comp2Stats">
                <div class="comp2-stat">
                  <span class="stat-label">Melhor ativo</span>
                  <span class="stat-value" id="statMelhor">--</span>
                </div>
                <div class="comp2-stat">
                  <span class="stat-label">Pior ativo</span>
                  <span class="stat-value" id="statPior">--</span>
                </div>
                <div class="comp2-stat">
                  <span class="stat-label">Infla√ß√£o per√≠odo</span>
                  <span class="stat-value" id="statInflacao">--</span>
                </div>
              </div>

              <!-- Conclus√µes -->
              <div class="comp2-conclusoes" id="comp2Conclusoes" style="display: none;">
                <h3>Conclus√µes</h3>
                <div id="comp2ConclusoesLista"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Duelo (Frente a Frente) -->
        <section class="comp2-tab" id="comp2-duelo">
          <div class="comp2-panel">
            <div class="comp2-config">
              <div class="comp2-config-row">
                <div class="comp2-field">
                  <label>Per√≠odo inicial</label>
                  <div class="comp2-date-select" data-target="comp2DueloPeriodoInicio">
                    <select class="date-month" data-default="01"></select>
                    <select class="date-year" data-default="2011"></select>
                    <input type="hidden" id="comp2DueloPeriodoInicio" value="2011-01">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Per√≠odo final</label>
                  <div class="comp2-date-select" data-target="comp2DueloPeriodoFim">
                    <select class="date-month" data-default="12"></select>
                    <select class="date-year" data-default="2025"></select>
                    <input type="hidden" id="comp2DueloPeriodoFim" value="2025-12">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Valor</label>
                  <div class="comp2-input-group">
                    <span>R$</span>
                    <input type="text" id="comp2DueloValor" value="100.000">
                  </div>
                </div>
              </div>
              <div class="comp2-config-row comp2-adjustments">
                <div class="comp2-field">
                  <label>D√≥lar + (a.a.) <span class="comp2-tooltip" title="Adiciona rendimento extra ao d√≥lar, ex: conta em corretora americana rendendo 4% ao ano">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2DueloDolarExtra" value="4" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Im√≥veis + (a.a.) <span class="comp2-tooltip" title="Rendimento anual l√≠quido de aluguel. Ex: 5% significa R$5.000/ano para im√≥vel de R$100.000">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2DueloImoveisRenda" value="4,5" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Simular infla√ß√£o <span class="comp2-tooltip" title="Opcional: se informado, substitui a infla√ß√£o hist√≥rica real por este valor fixo anual em todos os c√°lculos de retorno real">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2DueloInflacaoCustom" value="" placeholder="--" inputmode="decimal">
                    <span>% a.a.</span>
                  </div>
                </div>
              </div>

              <!-- Duelo Quick Picks -->
              <div class="comp2-duelo-grid">
                <button class="comp2-duelo-btn active" data-duelo="ibov-sp500">
                  <div class="duelo-icons">
                    <span>üáßüá∑</span><span class="vs">√ó</span><span>üá∫üá∏</span>
                  </div>
                  <span class="duelo-title">IBOV TR vs S&P</span>
                </button>
                <button class="comp2-duelo-btn" data-duelo="ouro-bitcoin">
                  <div class="duelo-icons">
                    <span>ü•á</span><span class="vs">√ó</span><span>‚Çø</span>
                  </div>
                  <span class="duelo-title">Ouro vs Bitcoin</span>
                </button>
                <button class="comp2-duelo-btn" data-duelo="ipca-tlt">
                  <div class="duelo-icons">
                    <span>üìà</span><span class="vs">√ó</span><span>üìâ</span>
                  </div>
                  <span class="duelo-title">IMA-B vs TLT</span>
                </button>
                <button class="comp2-duelo-btn" data-duelo="ibov-cdi">
                  <div class="duelo-icons">
                    <span>üìä</span><span class="vs">√ó</span><span>üí∞</span>
                  </div>
                  <span class="duelo-title">IBOV TR vs CDI</span>
                </button>
                <button class="comp2-duelo-btn" data-duelo="fii-imovel">
                  <div class="duelo-icons">
                    <span>üè¢</span><span class="vs">√ó</span><span>üè†</span>
                  </div>
                  <span class="duelo-title">FII vs Im√≥vel</span>
                </button>
                <button class="comp2-duelo-btn" data-duelo="dolar-ouro">
                  <div class="duelo-icons">
                    <span>üíµ</span><span class="vs">√ó</span><span>ü•á</span>
                  </div>
                  <span class="duelo-title">D√≥lar vs Ouro</span>
                </button>
              </div>
            </div>

            <!-- Duelo Result -->
            <div class="comp2-duelo-result" id="comp2DueloResult" style="display: none;">
              <!-- Placar Principal -->
              <div class="comp2-card">
                <h3>Resultado do Duelo</h3>
                <div class="duelo-scoreboard" id="comp2DueloPlacar">
                  <div class="duelo-player left">
                    <span class="player-icon">üáßüá∑</span>
                    <span class="player-name">Ibovespa</span>
                    <span class="player-return positivo">+142%</span>
                  </div>
                  <div class="duelo-vs-big">VS</div>
                  <div class="duelo-player right winner">
                    <span class="player-icon">üá∫üá∏</span>
                    <span class="player-name">S&P 500</span>
                    <span class="player-return positivo">+287%</span>
                    <span class="winner-badge">VENCEDOR</span>
                  </div>
                </div>
              </div>

              <!-- Gr√°fico Evolu√ß√£o -->
              <div class="comp2-card">
                <div class="comp2-card-header">
                  <h3>Evolu√ß√£o do Patrim√¥nio</h3>
                  <div class="comp2-toggle" id="comp2DueloToggle">
                    <button class="active" data-view="nominal">Nominal</button>
                    <button data-view="real">Real</button>
                  </div>
                </div>
                <div class="comp2-chart" id="comp2DueloChart"></div>
              </div>

              <!-- Tabela Ano a Ano -->
              <div class="comp2-card">
                <h3>Retorno Ano a Ano</h3>
                <div class="table-scroll">
                  <table class="comp2-table" id="comp2DueloTabela">
                    <thead></thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>

              <!-- M√©tricas Detalhadas -->
              <div class="comp2-card">
                <h3>M√©tricas Detalhadas</h3>
                <div class="comp2-metricas" id="comp2DueloMetricas"></div>
              </div>

              <!-- An√°lise Conceitual -->
              <div class="comp2-card comp2-analise-conceitual" id="comp2DueloAnalise">
                <h3>Entendendo a Compara√ß√£o</h3>
                <div id="comp2DueloAnaliseConteudo"></div>
              </div>

              <!-- Conclus√£o dos N√∫meros -->
              <div class="comp2-conclusoes" id="comp2DueloConclusao">
                <h3>O Que os N√∫meros Mostram</h3>
                <div id="comp2DueloConclusaoLista"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Carteira -->
        <section class="comp2-tab" id="comp2-carteira">
          <div class="comp2-panel">
            <div class="comp2-config">
              <div class="comp2-config-row">
                <div class="comp2-field">
                  <label>Per√≠odo inicial</label>
                  <div class="comp2-date-select" data-target="comp2CarteiraPeriodoInicio">
                    <select class="date-month" data-default="01"></select>
                    <select class="date-year" data-default="2011"></select>
                    <input type="hidden" id="comp2CarteiraPeriodoInicio" value="2011-01">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Per√≠odo final</label>
                  <div class="comp2-date-select" data-target="comp2CarteiraPeriodoFim">
                    <select class="date-month" data-default="12"></select>
                    <select class="date-year" data-default="2025"></select>
                    <input type="hidden" id="comp2CarteiraPeriodoFim" value="2025-12">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Valor inicial</label>
                  <div class="comp2-input-group">
                    <span>R$</span>
                    <input type="text" id="comp2CarteiraValor" value="100.000">
                  </div>
                </div>
              </div>
              <div class="comp2-config-row comp2-adjustments">
                <div class="comp2-field">
                  <label>D√≥lar + (a.a.) <span class="comp2-tooltip" title="Adiciona rendimento extra ao d√≥lar, ex: conta em corretora americana rendendo 4% ao ano">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2CarteiraDolarExtra" value="4" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Im√≥veis + (a.a.) <span class="comp2-tooltip" title="Rendimento anual l√≠quido de aluguel. Ex: 5% significa R$5.000/ano para im√≥vel de R$100.000">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2CarteiraImoveisRenda" value="4,5" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Simular infla√ß√£o <span class="comp2-tooltip" title="Opcional: se informado, substitui a infla√ß√£o hist√≥rica real por este valor fixo anual em todos os c√°lculos de retorno real">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2CarteiraInflacaoCustom" value="" placeholder="--" inputmode="decimal">
                    <span>% a.a.</span>
                  </div>
                </div>
              </div>

              <!-- Presets -->
              <div class="comp2-presets">
                <button class="comp2-preset comp2-preset-myportfolio" data-preset="myportfolio">üë§ Minha Carteira</button>
                <button class="comp2-preset active" data-preset="5050">50/50 Ibov+CDI</button>
                <button class="comp2-preset" data-preset="3ativos">33% cada (3)</button>
                <button class="comp2-preset" data-preset="4ativos">25% cada (4)</button>
                <button class="comp2-preset" data-preset="global">BR + EUA</button>
              </div>

              <!-- Allocation sliders -->
              <div class="comp2-allocation" id="comp2Allocation">
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#2563eb"></span>
                    <span class="alloc-name">IBOV TR</span>
                    <span class="alloc-pct">50%</span>
                  </div>
                  <input type="range" min="0" max="100" value="50" data-asset="ibovtr">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#ec4899"></span>
                    <span class="alloc-name">CDI</span>
                    <span class="alloc-pct">50%</span>
                  </div>
                  <input type="range" min="0" max="100" value="50" data-asset="cdi">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#22c55e"></span>
                    <span class="alloc-name">D√≥lar</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="dolar">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#eab308"></span>
                    <span class="alloc-name">Ouro</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="ouro">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#8b5cf6"></span>
                    <span class="alloc-name">FIIs</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="fii_ifix">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#10b981"></span>
                    <span class="alloc-name">IDIV</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="idiv">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#06b6d4"></span>
                    <span class="alloc-name">IMA-B 5+</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="imab5">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#ef4444"></span>
                    <span class="alloc-name">S&P 500</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="sp500_brl">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#0ea5e9"></span>
                    <span class="alloc-name">TLT</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="tlt_brl">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#14b8a6"></span>
                    <span class="alloc-name">Im√≥veis</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="imoveis_fipezap">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#f7931a"></span>
                    <span class="alloc-name">Bitcoin</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="bitcoin_brl">
                </div>
                <div class="alloc-total">
                  <span>Total:</span>
                  <span id="allocTotal">100%</span>
                </div>
              </div>

              <!-- Action button -->
              <button class="comp2-btn-run" id="comp2BtnCarteira">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
                Simular
              </button>
            </div>

            <div class="comp2-results" id="comp2CarteiraResults" style="display: none;">
              <div class="comp2-card">
                <h3>Carteira vs Ativos Individuais</h3>
                <div class="comp2-chart" id="comp2CarteiraChart" style="min-height: 300px;"></div>
              </div>
              <div class="comp2-card" id="comp2CarteiraResumo" style="display: none;">
                <h3>Resultado da Carteira</h3>
                <div class="comp2-stats-grid" id="comp2CarteiraStats"></div>
              </div>
              <div class="comp2-conclusoes" id="comp2CarteiraConclusoes" style="display: none;">
                <h3>üí° Conclus√µes</h3>
                <div id="comp2CarteiraConclusoesLista"></div>
              </div>
              <!-- Card de An√°lise de Diversifica√ß√£o -->
              <div class="comp2-card" id="comp2CarteiraDiversificacao" style="display: none;">
                <h3>üìä An√°lise de Diversifica√ß√£o</h3>
                <div id="comp2DiversificacaoContent"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Rebalancear -->
        <section class="comp2-tab" id="comp2-rebalancear">
          <div class="comp2-panel">
            <div class="comp2-config">
              <div class="comp2-config-row">
                <div class="comp2-field">
                  <label>Per√≠odo inicial</label>
                  <div class="comp2-date-select" data-target="comp2RebalPeriodoInicio">
                    <select class="date-month" data-default="01"></select>
                    <select class="date-year" data-default="2011"></select>
                    <input type="hidden" id="comp2RebalPeriodoInicio" value="2011-01">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Per√≠odo final</label>
                  <div class="comp2-date-select" data-target="comp2RebalPeriodoFim">
                    <select class="date-month" data-default="12"></select>
                    <select class="date-year" data-default="2025"></select>
                    <input type="hidden" id="comp2RebalPeriodoFim" value="2025-12">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Valor inicial</label>
                  <div class="comp2-input-group">
                    <span>R$</span>
                    <input type="text" id="comp2RebalValor" value="100.000" inputmode="numeric">
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Toler√¢ncia</label>
                  <div class="comp2-input-group">
                    <span>¬±</span>
                    <input type="text" id="comp2Tolerancia" value="10" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
              </div>
              <div class="comp2-config-row comp2-adjustments">
                <div class="comp2-field">
                  <label>D√≥lar + (a.a.) <span class="comp2-tooltip" title="Adiciona rendimento extra ao d√≥lar, ex: conta em corretora americana rendendo 4% ao ano">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2RebalDolarExtra" value="4" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Im√≥veis + (a.a.) <span class="comp2-tooltip" title="Rendimento anual l√≠quido de aluguel. Ex: 5% significa R$5.000/ano para im√≥vel de R$100.000">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2RebalImoveisRenda" value="4,5" inputmode="decimal">
                    <span>%</span>
                  </div>
                </div>
                <div class="comp2-field">
                  <label>Simular infla√ß√£o <span class="comp2-tooltip" title="Opcional: se informado, substitui a infla√ß√£o hist√≥rica real por este valor fixo anual em todos os c√°lculos de retorno real">?</span></label>
                  <div class="comp2-input-group">
                    <input type="text" id="comp2RebalInflacaoCustom" value="" placeholder="--" inputmode="decimal">
                    <span>% a.a.</span>
                  </div>
                </div>
              </div>
              <p class="comp2-hint">Rebalanceia quando desviar al√©m da toler√¢ncia definida.</p>

              <!-- Presets -->
              <div class="comp2-presets" id="comp2RebalPresets">
                <button class="comp2-preset comp2-preset-myportfolio" data-preset="myportfolio">üë§ Minha Carteira</button>
                <button class="comp2-preset active" data-preset="5050">‚öñÔ∏è 50/50 Ibov+CDI</button>
                <button class="comp2-preset" data-preset="3ativos">üî∫ 33% cada (3)</button>
                <button class="comp2-preset" data-preset="4ativos">üî∑ 25% cada (4)</button>
                <button class="comp2-preset" data-preset="global">üåé BR + EUA</button>
              </div>

              <!-- Allocation sliders -->
              <div class="comp2-allocation" id="comp2RebalAllocation">
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#2563eb"></span>
                    <span class="alloc-name">IBOV TR</span>
                    <span class="alloc-pct">50%</span>
                  </div>
                  <input type="range" min="0" max="100" value="50" data-asset="ibovtr">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#ec4899"></span>
                    <span class="alloc-name">CDI</span>
                    <span class="alloc-pct">50%</span>
                  </div>
                  <input type="range" min="0" max="100" value="50" data-asset="cdi">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#22c55e"></span>
                    <span class="alloc-name">D√≥lar</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="dolar">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#eab308"></span>
                    <span class="alloc-name">Ouro</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="ouro">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#8b5cf6"></span>
                    <span class="alloc-name">FIIs</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="fii_ifix">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#10b981"></span>
                    <span class="alloc-name">IDIV</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="idiv">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#06b6d4"></span>
                    <span class="alloc-name">IMA-B 5+</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="imab5">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#ef4444"></span>
                    <span class="alloc-name">S&P 500</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="sp500_brl">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#0ea5e9"></span>
                    <span class="alloc-name">TLT</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="tlt_brl">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#14b8a6"></span>
                    <span class="alloc-name">Im√≥veis</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="imoveis_fipezap">
                </div>
                <div class="alloc-item">
                  <div class="alloc-header">
                    <span class="alloc-dot" style="background:#f7931a"></span>
                    <span class="alloc-name">Bitcoin</span>
                    <span class="alloc-pct">0%</span>
                  </div>
                  <input type="range" min="0" max="100" value="0" data-asset="bitcoin_brl">
                </div>
                <div class="alloc-total">
                  <span>Total:</span>
                  <span id="comp2RebalTotal">100%</span>
                </div>
              </div>

              <!-- Action button -->
              <button class="comp2-btn-run" id="comp2BtnRebal">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polygon points="5 3 19 12 5 21 5 3"/>
                </svg>
                Simular Rebalanceamento
              </button>
            </div>

            <!-- Results -->
            <div class="comp2-results" id="comp2RebalResults" style="display: none;">
              <!-- Comparativo Principal -->
              <div class="comp2-card">
                <h3>‚öñÔ∏è Comparativo: Rebalanceamento vs Buy & Hold</h3>
                <div class="comp2-comparison" id="comp2RebalComparison"></div>
              </div>

              <!-- Gr√°fico -->
              <div class="comp2-card">
                <div class="comp2-card-header">
                  <h3>üìà Evolu√ß√£o do Patrim√¥nio</h3>
                  <div class="comp2-toggle">
                    <button class="active" data-view="nominal" id="comp2RebalBtnNominal">Nominal</button>
                    <button data-view="real" id="comp2RebalBtnReal">Real</button>
                  </div>
                </div>
                <div class="comp2-chart" id="comp2RebalChart" style="min-height: 300px;"></div>
                <div class="comp2-chart-legend">
                  <span><span class="legend-line solid"></span> Com rebalanceamento</span>
                  <span><span class="legend-line dashed"></span> Buy & Hold</span>
                </div>
              </div>

              <!-- M√©tricas -->
              <div class="comp2-card" id="comp2RebalMetricas">
                <h3>üìä M√©tricas Detalhadas</h3>
                <div class="comp2-stats-grid" id="comp2RebalStats"></div>
              </div>

              <!-- Hist√≥rico M√™s a M√™s -->
              <div class="comp2-card">
                <h3>üìÖ Hist√≥rico M√™s a M√™s</h3>
                <div class="table-scroll">
                  <table class="comp2-table" id="comp2RebalHistorico">
                    <thead></thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>

              <!-- Conclus√µes -->
              <div class="comp2-conclusoes" id="comp2RebalConclusoes">
                <h3>üí° Conclus√µes</h3>
                <div id="comp2RebalConclusoesLista"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Padr√µes Hist√≥ricos -->
        <section class="comp2-tab" id="comp2-padroes">
          <div class="comp2-panel">
            <div class="comp2-config">
              <!-- Crisis/Pattern selector -->
              <div class="comp2-pattern-grid">
                <button class="comp2-pattern-btn active" data-pattern="dotcom">
                  <span class="pattern-year">2000</span>
                  <span class="pattern-name">Bolha .com</span>
                </button>
                <button class="comp2-pattern-btn" data-pattern="subprime">
                  <span class="pattern-year">2008</span>
                  <span class="pattern-name">Subprime</span>
                </button>
                <button class="comp2-pattern-btn" data-pattern="brasil2015">
                  <span class="pattern-year">2015</span>
                  <span class="pattern-name">Crise BR</span>
                </button>
                <button class="comp2-pattern-btn" data-pattern="covid">
                  <span class="pattern-year">2020</span>
                  <span class="pattern-name">COVID-19</span>
                </button>
                <button class="comp2-pattern-btn" data-pattern="bitcoin">
                  <span class="pattern-year">Ciclos</span>
                  <span class="pattern-name">Bitcoin</span>
                </button>
                <button class="comp2-pattern-btn alert" data-pattern="ia">
                  <span class="pattern-year">2026?</span>
                  <span class="pattern-name">Bolha IA</span>
                </button>
              </div>
            </div>

            <div class="comp2-results" id="comp2PatternResults">
              <div class="comp2-card">
                <div class="pattern-header" id="patternHeader">
                  <h2>Bolha das .com</h2>
                  <span class="pattern-period">2000-2002</span>
                </div>
                <div class="pattern-content" id="patternContent">
                  <p>Selecione um padr√£o hist√≥rico acima para ver a an√°lise detalhada.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Tab: Calculadora -->
        <section class="comp2-tab" id="comp2-calculadora">
          <div class="comp2-panel">
            <div id="calculadora-container"></div>
          </div>
        </section>

        <!-- Tab: Constru√ß√£o -->
        <section class="comp2-tab" id="comp2-construcao">
          <div class="comp2-panel">
            <div id="custo-construcao-container"></div>
          </div>
        </section>

      </div>
    </main>

    <footer id="page-footer"></footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="../js/footer.js"></script>
  <script src="../js/page-header.js"></script>
  <script src="../js/comparador.js"></script>
  <script src="../js/comparador-ui.js"></script>
  <script src="../js/calculadora.js"></script>
  <script src="../js/custo-construcao-data.js"></script>
  <script src="../js/cidades-brasil.js"></script>
  <script src="../js/dados-mercado-imoveis.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="../js/custo-construcao.js"></script>
  <script src="../js/i18n.js"></script>
  <script>
    // Mobile dropup menu handler
    (function() {
      const moreBtn = document.getElementById('comp2NavMore');
      const dropup = document.getElementById('comp2Dropup');
      const overlay = document.getElementById('comp2DropupOverlay');
      const dropupBtns = document.querySelectorAll('.comp2-dropup-btn');
      const navBtns = document.querySelectorAll('.comp2-nav-btn');
      const tabs = document.querySelectorAll('.comp2-tab');

      if (!moreBtn || !dropup) return;

      function closeDropup() {
        dropup.classList.remove('show');
        overlay.classList.remove('show');
        moreBtn.classList.remove('active');
      }

      function openDropup() {
        dropup.classList.add('show');
        overlay.classList.add('show');
        moreBtn.classList.add('active');
      }

      function toggleDropup() {
        if (dropup.classList.contains('show')) {
          closeDropup();
        } else {
          openDropup();
        }
      }

      function switchTab(tabId) {
        // Remove active from all nav buttons
        navBtns.forEach(btn => btn.classList.remove('active'));
        dropupBtns.forEach(btn => btn.classList.remove('active'));
        moreBtn.classList.remove('has-active');

        // Hide all tabs
        tabs.forEach(tab => tab.classList.remove('active'));

        // Show selected tab
        const targetTab = document.getElementById(`comp2-${tabId}`);
        if (targetTab) {
          targetTab.classList.add('active');
        }

        // Mark corresponding button as active
        const mainNavBtn = document.querySelector(`.comp2-nav-btn[data-tab="${tabId}"]`);
        const dropupNavBtn = document.querySelector(`.comp2-dropup-btn[data-tab="${tabId}"]`);

        if (mainNavBtn) {
          mainNavBtn.classList.add('active');
        }
        if (dropupNavBtn) {
          dropupNavBtn.classList.add('active');
          // Mark more button as having an active child
          moreBtn.classList.add('has-active');
        }

        closeDropup();
      }

      // Event listeners
      moreBtn.addEventListener('click', toggleDropup);

      if (overlay) {
        overlay.addEventListener('click', closeDropup);
      }

      // Dropup button clicks
      dropupBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const tabId = this.dataset.tab;
          switchTab(tabId);
        });
      });

      // Close dropup when pressing Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && dropup.classList.contains('show')) {
          closeDropup();
        }
      });

      // Check if a dropup item is currently active (on page load/refresh)
      function checkActiveDropupItem() {
        const activeTab = document.querySelector('.comp2-tab.active');
        if (activeTab) {
          const tabId = activeTab.id.replace('comp2-', '');
          const dropupBtn = document.querySelector(`.comp2-dropup-btn[data-tab="${tabId}"]`);
          if (dropupBtn && window.innerWidth <= 768) {
            dropupBtn.classList.add('active');
            moreBtn.classList.add('has-active');
          }
        }
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', checkActiveDropupItem);
      } else {
        checkActiveDropupItem();
      }
    })();

    // Initialize custom date selects
    (function() {
      const months = [
        { value: '01', label: 'Jan' },
        { value: '02', label: 'Fev' },
        { value: '03', label: 'Mar' },
        { value: '04', label: 'Abr' },
        { value: '05', label: 'Mai' },
        { value: '06', label: 'Jun' },
        { value: '07', label: 'Jul' },
        { value: '08', label: 'Ago' },
        { value: '09', label: 'Set' },
        { value: '10', label: 'Out' },
        { value: '11', label: 'Nov' },
        { value: '12', label: 'Dez' }
      ];

      const startYear = 2005;
      const endYear = 2025;

      function initDateSelects() {
        document.querySelectorAll('.comp2-date-select').forEach(container => {
          const monthSelect = container.querySelector('.date-month');
          const yearSelect = container.querySelector('.date-year');
          const hiddenInput = container.querySelector('input[type="hidden"]');

          if (!monthSelect || !yearSelect || !hiddenInput) return;

          const defaultMonth = monthSelect.dataset.default || '01';
          const defaultYear = yearSelect.dataset.default || '2011';

          // Populate months
          months.forEach(m => {
            const opt = document.createElement('option');
            opt.value = m.value;
            opt.textContent = m.label;
            if (m.value === defaultMonth) opt.selected = true;
            monthSelect.appendChild(opt);
          });

          // Populate years
          for (let y = startYear; y <= endYear; y++) {
            const opt = document.createElement('option');
            opt.value = y;
            opt.textContent = y;
            if (y.toString() === defaultYear) opt.selected = true;
            yearSelect.appendChild(opt);
          }

          // Sync hidden input on change
          function syncValue() {
            hiddenInput.value = `${yearSelect.value}-${monthSelect.value}`;
          }

          monthSelect.addEventListener('change', syncValue);
          yearSelect.addEventListener('change', syncValue);
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initDateSelects);
      } else {
        initDateSelects();
      }
    })();
  </script>
</body>
</html>
